jQuery.ajax=(function(d){var e=location.protocol,hostname=location.hostname,exRegex=RegExp(e+'//'+hostname),YQL='http'+(/^https/.test(e)?'s':'')+'://query.yahooapis.com/v1/public/yql?callback=?',query='select * from html where url="{URL}" and charset="GB18030" and xpath="*"';function isExternal(a){return!exRegex.test(a)&&/:\/\//.test(a)}return function(o){var c=o.url;if(/get/i.test(o.type)&&!/json/i.test(o.dataType)&&isExternal(c)){o.url=YQL;o.dataType='json';o.data={q:query.replace('{URL}',c+(o.data?(/\?/.test(c)?'&':'?')+jQuery.param(o.data):'')),format:'xml'};if(!o.success&&o.complete){o.success=o.complete;delete o.complete}o.success=(function(b){return function(a){if(b){b.call(this,{responseText:(a.results[0]||'').replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi,'')},'success')}}})(o.success)}return d.apply(this,arguments)}})(jQuery.ajax);
